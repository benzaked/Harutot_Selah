{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";import React from'react';import Alert from\"react-native-web/dist/exports/Alert\";import Platform from\"react-native-web/dist/exports/Platform\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import MapView,{Marker,AnimatedRegion,Callout}from'react-native-maps';import{ClusterMap}from\"react-native-cluster-map\";var LATITUDE_DELTA=0.01;var LONGITUDE_DELTA=0.01;var Daniellongitude=34.8025459;var Daniellatitude=31.2658046;var initialRegion={latitude:31.2674413,longitude:34.8003693,latitudeDelta:0.0922,longitudeDelta:0.0421};var Map=function(_React$Component){_inherits(Map,_React$Component);function Map(){var _getPrototypeOf2;var _this;_classCallCheck(this,Map);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Map)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.map=null;_this.state={region:{latitude:-37.78825,longitude:-122.4324,latitudeDelta:0.0922,longitudeDelta:0.0421},sites:[{id:1,wasOnsite:0,latitude:Daniellatitude,longitude:Daniellongitude,image:require(\"../assets/Map/1.png\"),imageBig:require(\"../assets/2.jpg\")},{id:2,wasOnsite:0,latitude:30.8219382,longitude:34.7430979,image:require(\"../assets/Map/2.png\"),imageBig:require(\"../assets/2.jpg\")},{id:3,wasOnsite:0,latitude:30.819284,longitude:34.741121,image:require(\"../assets/Map/3.png\"),imageBig:require(\"../assets/3.jpg\")},{id:4,wasOnsite:0,latitude:30.8211714,longitude:34.7420160,image:require(\"../assets/Map/4.png\"),imageBig:require(\"../assets/4.jpg\")},{id:5,wasOnsite:0,latitude:30.8216163,longitude:34.7449705,image:require(\"../assets/Map/5.png\"),imageBig:require(\"../assets/5.jpg\")},{id:6,wasOnsite:0,latitude:30.8190776,longitude:34.7441376,image:require(\"../assets/Map/6.png\"),imageBig:require(\"../assets/6.jpg\")},{id:7,wasOnsite:0,latitude:30.8201821,longitude:34.7421676,image:require(\"../assets/Map/7.png\"),imageBig:require(\"../assets/7.jpg\")}],ready:true,filteredMarkers:[]};_this.Alertt=function(siteId,imageBig){console.log(imageBig);Alert.alert('כל הכבוד!!',' הגעת לאתר'+siteId+\" תרצה להמשיך?\",[{text:'Cancel',onPress:function onPress(){return console.log('Cancel Pressed');},style:'cancel'},{text:'OK',onPress:function onPress(){_this.props.navigation.navigate('comments_page',params={moveToStory:true,name:global.userName,photoUrl:global.photoUrl,userID:global.userId,pageNo:siteId,siteImg:imageBig});}}],{cancelable:false});};_this.isOnSite=function(newCoordinate){console.log('tal loat '+newCoordinate.latitude+\"tal long \"+newCoordinate.longitude);temp=_this.state.sites;temp.map(function(site,key){(Math.abs(newCoordinate.latitude-site.latitude)<0.00003||Math.abs(newCoordinate.longitude-site.longitude)<0.00003)&&site.wasOnsite==0?(site.wasOnsite=1,console.log('the image link is '+site.imageBig),_this.Alertt(site.id,site.imageBig)):console.log('the site id is : '+site.id+\" is Onsite value is  \"+site.wasOnsite);});_this.setState({sites:temp});};_this.onMapReady=function(e){if(!_this.state.ready){_this.setState({ready:true});}};_this.onRegionChange=function(region){console.log('onRegionChange',region);};_this.onRegionChangeComplete=function(region){console.log('onRegionChangeComplete',region);};_this.renderMarker=function(){React.createElement(Marker,{ref:function ref(marker){_this.marker=marker;}});};return _this;}_createClass(Map,[{key:\"setRegion\",value:function setRegion(region){var _this2=this;if(this.state.ready){setTimeout(function(){return _this2.map.mapview.animateToRegion(region);},10);}}},{key:\"componentDidMount\",value:function componentDidMount(){console.log('Component did mount');this.getCurrentPosition();}},{key:\"getCurrentPosition\",value:function getCurrentPosition(){var _this3=this;try{navigator.geolocation.getCurrentPosition(function(position){var region={latitude:position.coords.latitude,longitude:position.coords.longitude,latitudeDelta:LATITUDE_DELTA,longitudeDelta:LONGITUDE_DELTA};_this3.setRegion(region);},function(error){switch(error.code){case 1:if(Platform.OS===\"ios\"){Alert.alert(\"\",\"Para ubicar tu locación habilita permiso para la aplicación en Ajustes - Privacidad - Localización\");}else{Alert.alert(\"\",\"Para ubicar tu locación habilita permiso para la aplicación en Ajustes - Apps - ExampleApp - Localización\");}break;default:Alert.alert(\"\",\"Error al detectar tu locación\");}});}catch(e){alert(e.message||\"\");}}},{key:\"render\",value:function render(){var _this4=this;var region=this.state.region;var children=this.props.children;markers=this.state.sites.map(function(site,key){return React.createElement(Marker,{key:key,draggable:true,coordinate:{latitude:site.latitude,longitude:site.longitude},image:site.image},React.createElement(Callout,{onPress:_this4.showWelcomeMessage}));});return React.createElement(MapView,{ref:function ref(map){_this4.map=map;},loadingEnabled:true,loadingIndicatorColor:\"#666666\",initialRegion:initialRegion,onMapReady:this.onMapReady,showsMyLocationButton:false,showsUserLocation:true,showsCompass:true,onRegionChange:this.onRegionChange,onRegionChangeComplete:this.onRegionChangeComplete,style:StyleSheet.absoluteFill,textStyle:{color:'#bc8b00'},containerStyle:{backgroundColor:'white',borderColor:'#BC8B00'}},React.createElement(Marker,{tracksViewChanges:true,draggable:true,coordinate:(LatLng=this.region.latitude,this.region.longitude)}),children&&children||null);}}]);return Map;}(React.Component);export default Map;","map":{"version":3,"sources":["C:/final project/react native/finalProject-master/components/Map.js"],"names":["React","MapView","Marker","AnimatedRegion","Callout","ClusterMap","LATITUDE_DELTA","LONGITUDE_DELTA","Daniellongitude","Daniellatitude","initialRegion","latitude","longitude","latitudeDelta","longitudeDelta","Map","map","state","region","sites","id","wasOnsite","image","require","imageBig","ready","filteredMarkers","Alertt","siteId","console","log","Alert","alert","text","onPress","style","props","navigation","navigate","params","moveToStory","name","global","userName","photoUrl","userID","userId","pageNo","siteImg","cancelable","isOnSite","newCoordinate","temp","site","key","Math","abs","setState","onMapReady","e","onRegionChange","onRegionChangeComplete","renderMarker","marker","setTimeout","mapview","animateToRegion","getCurrentPosition","navigator","geolocation","position","coords","setRegion","error","code","Platform","OS","message","children","markers","showWelcomeMessage","StyleSheet","absoluteFill","color","backgroundColor","borderColor","LatLng","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {\r\n  Alert,\r\n  Platform,\r\n  StyleSheet\r\n} from 'react-native';\r\nimport MapView, { Marker, AnimatedRegion,Callout }  from 'react-native-maps'\r\nimport { ClusterMap } from \"react-native-cluster-map\";\r\n\r\nconst LATITUDE_DELTA = 0.01;\r\nconst LONGITUDE_DELTA = 0.01;\r\nconst Daniellongitude = 34.8025459\r\nconst Daniellatitude = 31.2658046\r\nconst initialRegion = {\r\n  latitude: 31.2674413,\r\n  longitude: 34.8003693,\r\n  latitudeDelta: 0.0922,\r\n  longitudeDelta: 0.0421,\r\n}\r\n\r\nclass Map extends React.Component {\r\n\r\n  map = null;\r\n\r\n  state = {\r\n    region: {\r\n      latitude: -37.78825,\r\n      longitude: -122.4324,\r\n      latitudeDelta: 0.0922,\r\n      longitudeDelta: 0.0421,\r\n    },\r\n    sites :[\r\n        {id:1,wasOnsite :0, latitude: Daniellatitude, longitude: Daniellongitude, image : require('../assets/Map/1.png'), imageBig : require('../assets/2.jpg')}, \r\n        {id:2,wasOnsite :0, latitude: 30.8219382, longitude: 34.7430979, image : require('../assets/Map/2.png'), imageBig : require('../assets/2.jpg')}, \r\n        {id:3,wasOnsite :0, latitude: 30.819284, longitude:34.741121, image : require('../assets/Map/3.png'), imageBig : require('../assets/3.jpg')}, \r\n        {id:4,wasOnsite :0, latitude: 30.8211714, longitude:34.7420160, image : require('../assets/Map/4.png'), imageBig : require('../assets/4.jpg')}, \r\n        {id:5,wasOnsite :0, latitude: 30.8216163, longitude:34.7449705, image : require('../assets/Map/5.png'), imageBig : require('../assets/5.jpg')}, \r\n        {id:6,wasOnsite :0, latitude: 30.8190776, longitude:34.7441376, image : require('../assets/Map/6.png'), imageBig : require('../assets/6.jpg')} , \r\n        {id:7,wasOnsite :0, latitude: 30.8201821, longitude:34.7421676, image : require('../assets/Map/7.png'), imageBig : require('../assets/7.jpg')}, \r\n      ],\r\n    ready: true,\r\n    filteredMarkers: []\r\n  };\r\n  \r\n  Alertt = (siteId,imageBig) =>{\r\n    \r\n    console.log(imageBig)\r\n    Alert.alert(\r\n      'כל הכבוד!!',\r\n      ' הגעת לאתר' + siteId + \" תרצה להמשיך?\",\r\n      [\r\n        {\r\n          text: 'Cancel',\r\n          onPress: () => console.log('Cancel Pressed'),\r\n          style: 'cancel',\r\n        },\r\n        {text: 'OK', onPress: () => {\r\n       \r\n        \r\n          this.props.navigation.navigate('comments_page', params = {\r\n            moveToStory: true,\r\n            name: global.userName,\r\n            photoUrl: global.photoUrl,\r\n            userID: global.userId,\r\n            pageNo: siteId,\r\n            siteImg: imageBig,\r\n          });},\r\n        }\r\n      ],\r\n      {cancelable: false},\r\n    );\r\n  }\r\n  isOnSite = (newCoordinate) => {\r\n      \r\n      console.log ('tal loat ' + newCoordinate.latitude +\"tal long \"+ newCoordinate.longitude )\r\n      \r\n      temp = this.state.sites\r\n      temp.map((site, key) =>{\r\n      (((Math.abs(newCoordinate.latitude - site.latitude)< 0.00003 || Math.abs(newCoordinate.longitude - site.longitude) <0.00003) && site.wasOnsite == 0  ?\r\n          \r\n          (\r\n            site.wasOnsite = 1,\r\n            console.log('the image link is ' + site.imageBig),\r\n            this.Alertt(site.id,site.imageBig)\r\n            \r\n              // console.log('Im in site ' + site.id + \" and i changed his Was on site to  \" + site.wasOnsite )\r\n          )\r\n          : (console.log('the site id is : '+ site.id + \" is Onsite value is  \" + site.wasOnsite)\r\n          ) \r\n          \r\n       ))\r\n         \r\n\r\n      }\r\n      \r\n);\r\n      this.setState({                \r\n        sites : temp\r\n        \r\n\r\n      });\r\n      \r\n  \r\n \r\n}\r\n  \r\n  setRegion(region) {\r\n    if(this.state.ready) {\r\n      setTimeout(() => this.map.mapview.animateToRegion(region), 10);\r\n    }\r\n    //this.setState({ region });\r\n  }\r\n\r\n  componentDidMount() {\r\n    console.log('Component did mount');\r\n    this.getCurrentPosition();\r\n  }\r\n\r\n  getCurrentPosition() {\r\n    try {\r\n      navigator.geolocation.getCurrentPosition(\r\n        (position) => {\r\n          const region = {\r\n            latitude: position.coords.latitude,\r\n            longitude: position.coords.longitude,\r\n            latitudeDelta: LATITUDE_DELTA,\r\n            longitudeDelta: LONGITUDE_DELTA,\r\n          };\r\n          this.setRegion(region);\r\n        },\r\n        (error) => {\r\n          //TODO: better design\r\n          switch (error.code) {\r\n            case 1:\r\n              if (Platform.OS === \"ios\") {\r\n                Alert.alert(\"\", \"Para ubicar tu locación habilita permiso para la aplicación en Ajustes - Privacidad - Localización\");\r\n              } else {\r\n                Alert.alert(\"\", \"Para ubicar tu locación habilita permiso para la aplicación en Ajustes - Apps - ExampleApp - Localización\");\r\n              }\r\n              break;\r\n            default:\r\n              Alert.alert(\"\", \"Error al detectar tu locación\");\r\n          }\r\n        }\r\n      );\r\n    } catch(e) {\r\n      alert(e.message || \"\");\r\n    }\r\n  };\r\n\r\n  onMapReady = (e) => {\r\n    if(!this.state.ready) {\r\n      this.setState({ready: true});\r\n    }\r\n  };\r\n\r\n  onRegionChange = (region) => {\r\n    console.log('onRegionChange', region);\r\n  };\r\n\r\n  onRegionChangeComplete = (region) => {\r\n    console.log('onRegionChangeComplete', region);\r\n  };\r\n  renderMarker = () =>{\r\n    <Marker\r\n    ref={marker => {\r\n      this.marker = marker;\r\n    }}\r\n  \r\n  />\r\n    }\r\n  render() {\r\n\r\n    const { region } = this.state;\r\n    const { children } = this.props;\r\n    markers =  this.state.sites.map((site, key) =>{\r\n        return(\r\n         \r\n         <Marker \r\n           key={key}\r\n           draggable\r\n           coordinate={{ latitude: site.latitude , longitude: site.longitude }}\r\n           image={site.image}>\r\n             \r\n           <Callout onPress={this.showWelcomeMessage}>\r\n           </Callout>\r\n         </Marker>\r\n         )\r\n       \r\n      })\r\n    return (\r\n      <MapView\r\n        \r\n        ref={ map => { this.map = map }}\r\n        loadingEnabled = {true}\r\n        loadingIndicatorColor=\"#666666\"\r\n        initialRegion={initialRegion}\r\n        onMapReady={this.onMapReady}\r\n        showsMyLocationButton={false}\r\n        showsUserLocation={true}\r\n        showsCompass={true}\r\n        onRegionChange={this.onRegionChange}\r\n        onRegionChangeComplete={this.onRegionChangeComplete}\r\n        style={StyleSheet.absoluteFill}\r\n        textStyle={{ color: '#bc8b00' }}\r\n        containerStyle={{backgroundColor: 'white', borderColor: '#BC8B00'}}>\r\n        <Marker \r\n            tracksViewChanges ={true}\r\n            draggable\r\n            coordinate= {LatLng\t= this.region.latitude,this.region.longitude}\r\n            \r\n            // {{ \"latitude\": Daniellatitude,   \r\n            // \"longitude\": Daniellongitude }}\r\n        />\r\n        \r\n        {children && children || null}\r\n\r\n      </MapView>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Map;"]},"metadata":{},"sourceType":"module"}