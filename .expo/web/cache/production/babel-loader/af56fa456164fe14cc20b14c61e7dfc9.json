{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";import React,{Component}from'react';import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import TextInput from\"react-native-web/dist/exports/TextInput\";import Button from\"react-native-web/dist/exports/Button\";import Image from\"react-native-web/dist/exports/Image\";import ImageBackground from\"react-native-web/dist/exports/ImageBackground\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import Story from\"./Story\";import firebase from'firebase';import{firebaseConfig}from\"../config\";var StoryList=function(_Component){_inherits(StoryList,_Component);function StoryList(props){var _this;_classCallCheck(this,StoryList);_this=_possibleConstructorReturn(this,_getPrototypeOf(StoryList).call(this,props));_this.temp=function(){firebase.database().ref('/Stories/'+1).set({numberOfSite:1,storyTitle:\"story title 1\",story:\"story 1\"});firebase.database().ref('/Stories/'+2).set({numberOfSite:2,storyTitle:\"story title 2\",story:\"story 2\"});firebase.database().ref('/Stories/'+3).set({numberOfSite:3,storyTitle:\"story title 3\",story:\"story 3\"});firebase.database().ref('/Stories/'+4).set({numberOfSite:4,storyTitle:\"story title 4\",story:\"story 4\"});};_this.listenForStories=function(storiesRef){storiesRef.on('value',function(dataSnapshot){var aux=[];dataSnapshot.forEach(function(child){child.val().numberOfSite==_this.state.numberOfSite?aux.push({numberOfSite:child.val().numberOfSite,storyTitle:child.val().storyTitle,story:child.val().story}):null;});_this.setState({stories:aux});});};_this.renderList=function(){return _this.state.stories.map(function(data,key,val){return React.createElement(Story,{key:key,numberOfSite:data.numberOfSite,storyTitle:data.storyTitle,story:data.story});});};_this.state={numberOfSite:_this.props.navigation.state.params.pageNo,stories:[]};if(!firebase.apps.length){firebase.initializeApp(firebaseConfig);};return _this;}_createClass(StoryList,[{key:\"componentDidMount\",value:function componentDidMount(){var storiesRef=firebase.database().ref('Stories');this.listenForStories(storiesRef);this.temp();}},{key:\"render\",value:function render(){return React.createElement(ScrollView,null,this.renderList());}}]);return StoryList;}(Component);export{StoryList as default};","map":{"version":3,"sources":["C:/final project/react native/finalProject-master/components/StoryList.js"],"names":["React","Component","Story","firebase","firebaseConfig","StoryList","props","temp","database","ref","set","numberOfSite","storyTitle","story","listenForStories","storiesRef","on","dataSnapshot","aux","forEach","child","val","state","push","setState","stories","renderList","map","data","key","navigation","params","pageNo","apps","length","initializeApp"],"mappings":"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","sourcesContent":["â€ƒ\r\nimport React,  { Component } from 'react';\r\n\r\nimport { StyleSheet, Text, View,TextInput,Button,Image,ImageBackground, ScrollView} from 'react-native';\r\nimport Story from './Story'\r\nimport firebase from 'firebase'\r\nimport {firebaseConfig} from '../config'\r\nexport default class StoryList extends Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        numberOfSite: this.props.navigation.state.params.pageNo,\r\n        stories: []\r\n       \r\n      };\r\n      if (!firebase.apps.length) {firebase.initializeApp(firebaseConfig)};\r\n    }//constructor\r\n\r\n    componentDidMount(){\r\n\r\n      const storiesRef = firebase.database().ref('Stories');\r\n      this.listenForStories(storiesRef);//taking the data from database\r\n      this.temp();//inserting fake data to database\r\n    };//componentDidMount\r\n\r\n    temp = () =>{\r\n        \r\n      firebase.database().ref('/Stories/' + 1).set({\r\n          numberOfSite:1,\r\n          storyTitle :\"story title 1\",\r\n          story: \"story 1\"\r\n      })\r\n     \r\n      firebase.database().ref('/Stories/' + 2).set({\r\n          numberOfSite:2,\r\n          storyTitle :\"story title 2\",\r\n          story: \"story 2\"\r\n      })\r\n\r\n      firebase.database().ref('/Stories/' + 3).set({\r\n        numberOfSite:3,\r\n        storyTitle :\"story title 3\",\r\n        story: \"story 3\"\r\n    })\r\n\r\n    firebase.database().ref('/Stories/' + 4).set({\r\n      numberOfSite:4,\r\n      storyTitle :\"story title 4\",\r\n      story: \"story 4\"\r\n  })\r\n      }//temp\r\n  \r\n  listenForStories = (storiesRef) => {\r\n      \r\n    storiesRef.on('value', (dataSnapshot) => {\r\n        var aux = [];\r\n        dataSnapshot.forEach((child) => {\r\n          child.val().numberOfSite == this.state.numberOfSite ?\r\n          aux.push({\r\n            numberOfSite:child.val().numberOfSite,\r\n            storyTitle:child.val().storyTitle,\r\n            story:child.val().story\r\n          }) : null\r\n        \r\n      });\r\n        this.setState({stories: aux});\r\n       \r\n      });\r\n    };  // listenForStories\r\n \r\n    renderList = () => {\r\n        \r\n      return(\r\n      this.state.stories.map((data,key,val) => {\r\n          return (\r\n          <Story\r\n          key={key}\r\n          numberOfSite={data.numberOfSite}\r\n          storyTitle={data.storyTitle}\r\n          story={data.story}\r\n          ></Story>\r\n       \r\n            )}\r\n          ))\r\n}//renderList\r\n\r\nrender() {\r\n  return (\r\n    <ScrollView>\r\n\r\n     {this.renderList()} \r\n  \r\n    </ScrollView>\r\n)}\r\n \r\n}//class\r\n\r\n"]},"metadata":{},"sourceType":"module"}